var{defineProperty:I,getOwnPropertyNames:XO,getOwnPropertyDescriptor:KO}=Object,NO=Object.prototype.hasOwnProperty;var d=new WeakMap,HO=(O)=>{var G=d.get(O),K;if(G)return G;if(G=I({},"__esModule",{value:!0}),O&&typeof O==="object"||typeof O==="function")XO(O).map((N)=>!NO.call(G,N)&&I(G,N,{get:()=>O[N],enumerable:!(K=KO(O,N))||K.enumerable}));return d.set(O,G),G};var YO=(O,G)=>{for(var K in G)I(O,K,{get:G[K],enumerable:!0,configurable:!0,set:(N)=>G[K]=()=>N})};var TO=(O,G)=>()=>(O&&(G=O(O=0)),G);var u={VALIDATION_ERROR:"VALIDATION_ERROR",AUTH_ERROR:"AUTH_ERROR",NOT_FOUND:"NOT_FOUND",SERVER_ERROR:"SERVER_ERROR"};var WO=(O)=>O&&typeof O==="object"&&("nodeType"in O),kO=(O,G)=>O.querySelector(G),V=(O)=>!O?null:typeof O==="string"?document.querySelector(O):O,JO={fieldInvalid:"fv-invalid",fieldValid:"fv-valid",fieldTouched:"fv-touched"},QO=(O,G)=>{if(!O)return;let K=O.tagName==="UL"||O.tagName==="OL";if(O.classList.toggle("hidden",G.length===0),K)O.innerHTML=G.map((N)=>`<li>${N}</li>`).join("");else O.innerHTML=G.join("<br>")},ZO=(O,G)=>{if(!O)return;let K=O.tagName==="UL"||O.tagName==="OL";if(O.classList.toggle("hidden",G.length===0),K)O.innerHTML=G.map((N)=>`<li>${N}</li>`).join("");else O.innerHTML=G.join("<br>")},g=(O,G=200)=>{let K,N=(...Z)=>{if(K)window.clearTimeout(K);K=window.setTimeout(()=>O(...Z),G)};return N.flush=()=>{if(K)window.clearTimeout(K),K=void 0,O()},N};function i(O,G,K){let N=V(O.form),Z={...JO,...O.classes||{}},j=O.validateOnSubmit!==!1,p=O.preventSubmitIfInvalid!==!1,r=K?.onValidationChange,q={},$={},m={},z=[];for(let X of Object.keys(G)){let k=G[X],W=typeof k.selector==="string"?kO(document,k.selector):k.selector;q[X]=W??null,$[X]={touched:!1,dirty:!1,messages:[],validating:!1,valid:!0},m[X]=k.debounceMs?g(()=>{return},k.debounceMs):null}function n(X){if(!X.messageTarget)return null;if(typeof X.messageTarget==="function")return X.messageTarget;return V(X.messageTarget)}let b=(X)=>{let k=G[X],W=q[X];if(k.getValue)return k.getValue(W);if(!W)return;if(W instanceof HTMLInputElement){let J=W.type;if(J==="checkbox")return!!W.checked;if(J==="number"||J==="range")return W.value===""?void 0:Number(W.value);return W.value}if(W instanceof HTMLTextAreaElement)return W.value;if(W instanceof HTMLSelectElement)return W.value;return W.value},t=(X,k)=>{let W=G[X],J=q[X];if(W.setValue)return W.setValue(J,k);if(!J)return;if(J instanceof HTMLInputElement||J instanceof HTMLTextAreaElement||J instanceof HTMLSelectElement)if(J.type==="checkbox"&&typeof k==="boolean")J.checked=k;else J.value=k;else J.value=k},_=()=>{let X={};for(let k of Object.keys(G))X[k]=b(k);return X},L=typeof O.errorSummary==="function"||!O.errorSummary?O.errorSummary:V(O.errorSummary);function T(X){if(typeof L==="function")L(X,N);else QO(L,X)}function B(X){let k=G[X],W=n(k),J=$[X].messages,Q=q[X];if(k.a11y!==!1&&Q){if(Q.setAttribute("aria-invalid",String(J.length>0)),W&&WO(W)){let H=W.id||`${String(X)}-error`;W.id=H,Q.setAttribute("aria-describedby",H)}}if(typeof W==="function")W({name:X,messages:J,fieldEl:Q,formEl:N});else ZO(W,J);if(Q)Q.classList.toggle(Z.fieldInvalid,J.length>0),Q.classList.toggle(Z.fieldValid,J.length===0&&$[X].touched)}function w(){return[...Object.values($).flatMap((X)=>X.messages),...z]}let y;function A(){let X=Object.values($).every((k)=>k.valid&&!k.validating)&&z.length===0;if(X!==y)y=X,r?.(X)}async function l(X){let W=G[X].validators||[],J=b(X),Q=_(),H=q[X],v=[];for(let GO of W){let x=await GO({name:X,value:J,formData:Q,fieldEl:H,formEl:N});if(!x||x.valid===!0)continue;v.push(x.message)}return v}async function D(X){let k=G[X],W=$[X];W.touched=!0;let J=async()=>{W.validating=!0;let Q=await l(X);return W.messages=Q,W.valid=Q.length===0,W.validating=!1,B(X),T(w()),A(),W.valid};if(k.debounceMs&&k.debounceMs>0)return new Promise((Q)=>{g(async()=>Q(await J()),k.debounceMs)()});return J()}async function R(){let X=await Promise.all(Object.keys(G).map((J)=>D(J))),k=[];if(O.formValidators)k=(await O.formValidators({formData:_(),formEl:N})).filter((Q)=>Q&&!Q.valid).map((Q)=>Q.message);z=k;let W=w();if(T(W),A(),O.scrollToFirstError&&W.length>0){let J=Object.keys($).find((H)=>$[H].messages.length>0),Q=J?q[J]:null;Q?.scrollIntoView({behavior:"smooth",block:"center"}),Q?.focus({preventScroll:!0})}return X.every(Boolean)&&z.length===0}function s(X,k=[]){for(let W of Object.keys(G)){let J=X[W]||[];$[W].messages=J,$[W].valid=J.length===0,$[W].touched=!0,B(W)}z=k,T(w()),A()}function a(){for(let X of Object.keys($))$[X].messages=[],$[X].valid=!0,B(X);z=[],T([]),A()}function c(X){$[X].touched=!0,q[X]?.classList.add(Z.fieldTouched)}function e(){for(let X of Object.keys($))$[X]={touched:!1,dirty:!1,messages:[],validating:!1,valid:!0},B(X);z=[],T([]),A()}function OO(){if(N&&j&&p)N.removeEventListener("submit",E);for(let X of Object.keys(G)){let k=q[X],W=G[X],J=C[X];if(k&&J)for(let Q of W.validateOn||[])k.removeEventListener(Q,J)}}let C={};for(let X of Object.keys(G)){let k=G[X],W=q[X];if(!W)continue;let J=async()=>{c(X),await D(X)};C[X]=J;for(let Q of k.validateOn||[])W.addEventListener(Q,J)}async function E(X){if(!p)return;if(!await R())X.preventDefault(),X.stopPropagation()}if(N&&j)N.addEventListener("submit",E);return{get formEl(){return N},get fields(){return Object.fromEntries(Object.entries(q))},validateField:(X)=>D(X),validateForm:R,setErrors:s,clearErrors:a,getData:()=>_(),setValue:t,touch:c,reset:e,destroy:OO}}var P={required(O="This field is required."){return({value:G})=>{if(G===void 0||G===null)return{valid:!1,message:O};if(typeof G==="string"&&G.trim()==="")return{valid:!1,message:O};if(Array.isArray(G)&&G.length===0)return{valid:!1,message:O};return{valid:!0}}},pattern(O,G="Invalid format."){return({value:K})=>{if(typeof K!=="string")return{valid:!0};return O.test(K)?{valid:!0}:{valid:!1,message:G}}},email(O="Invalid email address."){let G=/^(?:[a-zA-Z0-9_'^&\-]+(?:\.[a-zA-Z0-9_'^&\-]+)*)@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}$/;return({value:K})=>{if(typeof K!=="string"||K.trim()==="")return{valid:!0};return G.test(K.trim())?{valid:!0}:{valid:!1,message:O}}},minLength(O,G){return({value:K})=>{if(typeof K!=="string")return{valid:!0};if(K.length<O)return{valid:!1,message:G||`Must be at least ${O} characters.`};return{valid:!0}}},maxLength(O,G){return({value:K})=>{if(typeof K!=="string")return{valid:!0};if(K.length>O)return{valid:!1,message:G||`Must be at most ${O} characters.`};return{valid:!0}}},equalsField(O,G="Values do not match."){return({formData:K})=>{return{valid:!0}}},sameAs(O,G="Values do not match."){return({value:K,formData:N})=>{return K===N[O]?{valid:!0}:{valid:!1,message:G}}},numberRange(O,G,K){return({value:N})=>{if(N===void 0||N===null||Number.isNaN(N))return{valid:!0};if(typeof O==="number"&&N<O)return{valid:!1,message:K||`Must be ≥ ${O}.`};if(typeof G==="number"&&N>G)return{valid:!1,message:K||`Must be ≤ ${G}.`};return{valid:!0}}},passwordRules(O={}){let G={upper:/[A-Z]/,lower:/[a-z]/,digit:/\d/,special:/[^A-Za-z0-9\s]/};return({value:K})=>{if(typeof K!=="string"||K.length===0)return{valid:!0};let N=[];if(O.upper&&!G.upper.test(K))N.push("an uppercase letter");if(O.lower&&!G.lower.test(K))N.push("a lowercase letter");if(O.digit&&!G.digit.test(K))N.push("a digit");if(O.special&&!G.special.test(K))N.push("a special character");if(typeof O.minUnique==="number"){if(new Set(K.split("")).size<O.minUnique)N.push(`${O.minUnique} unique characters`)}if(N.length)return{valid:!1,message:`Password must include: ${N.join(", ")}.`};return{valid:!0}}},custom(O){return O}};var h={AUTH:{LOGIN:"/login"},USER:{ROOT:"/user"},DASHBOARD:{INDEX:"/"},CATEGORIES:{INDEX:"/categories"},SETTINGS:{INDEX:"/settings"},STATIC:{ROOT:"/static",CSS:"/static/css",LIB:"/static/lib",IMAGES:"/static/images"}};var f=(O=document)=>{O.querySelectorAll("[data-password-with-toggle]").forEach((G)=>{let K=G.querySelector("input[type='password'], input[type='text']"),N=G.querySelector("button");if(!K||!N)return;let Z=N.querySelectorAll("svg");if(N.addEventListener("click",()=>{let j=K.type==="password";if(K.type=j?"text":"password",Z.length>=2)Z[0].style.display=j?"none":"",Z[1].style.display=j?"":"none"}),Z.length>=2)Z[0].style.display="",Z[1].style.display="none"})},_O=()=>{document.querySelectorAll("button[data-fetchable=true]").forEach((O)=>{O.addEventListener("click",()=>M(O))})},M=(O)=>{O.setAttribute("data-fetch-status","loading"),O.disabled=!0},F=(O)=>{O.setAttribute("data-fetch-status","idle"),O.disabled=!1};f();var o=document.querySelector("#login-form"),U=document.querySelector('button[type="submit"]'),Y=document.querySelector("ul#response-errors"),S=(O)=>{if(!Y){console.warn('Error container <ul id="response-errors"> not found.');return}Y.innerHTML="",O.forEach((G)=>{let K=document.createElement("li");K.textContent=G,Y.appendChild(K)}),Y.classList.remove("hidden")},$O=()=>{if(Y)Y.innerHTML="",Y.classList.add("hidden")},jO=()=>i({form:"#login-form",errorSummary:"#form-errors",validateOnSubmit:!0,scrollToFirstError:!0,preventSubmitIfInvalid:!0},{email:{selector:'input[type="email"], input[name="email"]',validateOn:["input","blur"],debounceMs:500,validators:[P.required("Email is required."),P.email()],a11y:!0},password:{selector:'input[type="password"]',validateOn:["input","blur"],debounceMs:500,validators:[P.minLength(8),P.passwordRules({upper:!0,lower:!0,digit:!0,special:!0})],a11y:!0}},{onValidationChange:(O)=>{if(U)U.disabled=!O}}),qO=async(O)=>{return fetch(h.AUTH.LOGIN,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)})},zO=(O)=>async(G)=>{G.preventDefault(),$O(),M(U);let K=O.getData();try{let N=await qO(K),Z=await N.json();if(!N.ok){F(U);let j=Z;if(console.info("Login error:",j),j.name===u.VALIDATION_ERROR)S(j.data??[]);else S(["Invalid email or password."]);return}console.log("Login successful"),window.location.replace(h.DASHBOARD.INDEX)}catch(N){F(U);let Z=N instanceof Error?N.message:"Login failed, please try again.";S([Z])}};document.addEventListener("DOMContentLoaded",()=>{if(!o){console.warn("Login form not found.");return}let O=jO();o.addEventListener("submit",zO(O))});

//# debugId=C9EA470483B93AFF64756E2164756E21
